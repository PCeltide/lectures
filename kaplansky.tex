\chapter{The Kaplansky conjectures}

\section{Introduction}

\begin{definition}
    Let $R$ be a ring and $G$ be a group. The \emph{group ring} $R[G]$ consists of finite formal $R$-linear sums \[
        R[G] = \set{ \sum_{i=1}^n r_{g_i} \cdot g_i }{ r_{g_i} \in R, g_i \in G }
    \] with multiplication \[
        (\sum r_g \cdot g)(\sum s_h \cdot h) = \sum r_g s_h \cdot g h = \sum_k (\sum_{gh = k} r_g s_h) \cdot k.
    \]
\end{definition}

In this course, we'll almost always have $R = \Z$ or $R = K$ a field; in the latter case, one often calls $K[G]$ the \emph{group algebra}.

\begin{center}
    \fbox{\parbox{20em}{
        \centering
        From now on: \\ $G$ will always be a group, \\ $K$ will always be a field, and \\ $R$ will always be a ring.
    }}
\end{center}

\begin{example}
    For $G = \Z = \gen{t}$, $R[G]$ is the ring of Laurent polynomials over $R$, usually denoted $R[t,t^{-1}]$.
\end{example}

A viewpoint due to Noether: Representations of $G$ on $K$-vector spaces are $K[G]$-modules.

\begin{warning}
    $K[G]$ is non-commutative unless $G$ is abelian. It is (left) Noetherian only in special settings and it is never semisimple for infinite $G$ (cf.\ Maschke's theorem).
\end{warning}

Although group rings tend to have bad ring theoretic properties, they conjecturally have nice elementary properties.
Note first that for $k \in K \setminus \{0\}$ and $g \in G$, the element $kg \in K[G]$ is a unit (with $(k \cdot g)^{-1} = k^{-1} \cdot g^{-1}$); such units are called \emph{trivial}.
A group is called \emph{torsion-free} if it has no non-trivial finite order elements.
For example, fundamental groups of aspherical manifolds are torsion-free.

\begin{definition}
    Let $\mathcal{P}$ be a property of groups.
    A group $G$ is \emph{virtually $\mathcal{P}$} if it has a finite-index subgroup $G_0$ with $\mathcal{P}$.
\end{definition}

As another example, a finitely generated subgroup of $\GL_n(\C)$ is virtually torsion-free (Selberg).

\begin{conjecture}[The Kaplansky conjectures]
    If $G$ is torsion-free, then $K[G]$ has
    \begin{itemize}
        \item no non-trivial units: $\alpha \beta = \beta \alpha = 1 \implies \alpha = kg$ for some $k \in K^\times, g \in G$
        \item no non-zero zero divisors: $\alpha \beta = 0 \implies \alpha = 0$ or $\beta = 0$, and
        \item no non-trivial idempotents: $\alpha^2 = \alpha \implies \alpha = 0$ or $\alpha = 1$.
    \end{itemize}
    For \emph{any} $G$ (possibly with torsion), $K[G]$ is
    \begin{itemize}
        \item directly finite: $\alpha \beta = 1 \implies \beta \alpha = 1$.
    \end{itemize}
\end{conjecture}

These are the unit conjecture, zero divisor conjecture, idempotent conjecture and direct finiteness conjectures respectively.
(Direct finiteness is also called \emph{Dedekind finiteness} or \emph{von Neumann finiteness}.)

\begin{remark}
    The unit conjecture is false; the others are open.
\end{remark}

\begin{remark}
    Torsion-freeness is essential. For example, if $g \in G$ has order $n \geq 2$ then $(1 - g)(1 + g + \dots + g^{n-1}) = 1 - g^n = 0$.
\end{remark}

\begin{remark}
    These conjectures are ``local'' in the sense that they only depend on the finitely generated subgroups of $G$.
\end{remark}

\begin{proposition}
    \label{proposition:kaplansky_relations}
    For a given torsion-free group $G$ and field $K$, we have \[
        \text{unit conj.} \implies
        \text{zero divisor conj.} \implies
        \text{idempotent conj.} \implies
        \text{direct finiteness}
    \]
\end{proposition}

\begin{proof}
    The 3 weaker conjectures are ring theoretic statements and their implications are easy ring theoretic observations: if $\alpha \beta = 1$ and $\beta \alpha \neq 1$ then $(\beta \alpha)^2 = \beta (\alpha \beta) \alpha = \beta \alpha$ is a non-trivial idempotent.
    If $\alpha^2 = \alpha$ is a non-trivial idempotent, then $\alpha^2 - \alpha = \alpha (\alpha - 1) = 0$ with both factors non-zero.

    The unit conjecture is a ``group ring theoretic'' statement and the proof of the implication requires the following (which we'll prove later using group theory):
    \begin{theorem}[Connell]
        $K[G]$ is prime if and only if $G$ has no non-trivial finite normal subgroup.
    \end{theorem}
    A non-commutative ring $R$ is called \emph{prime} if the zero ideal is not a product of two non-zero ideals.
    This is equivalent to saying that for all $0 \neq \alpha, \beta \in R$ there exists $\gamma \in R$ with $\alpha \gamma \beta \neq 0$.

    Since $G$ is torsion-free, $K[G]$ is prime.
    Suppose that $\alpha \beta = 0$ for $\alpha, \beta \neq 0$.
    Then there exists $\gamma \in K[G]$ with $\beta \gamma \alpha \neq 0$.
    Now \[
        (1 + \beta \gamma \alpha) (1 - \beta \gamma \alpha) = 1 - \beta \gamma (\alpha \beta) \gamma \alpha = 1.
    \]
    Thus $1 + \beta \gamma \alpha$ is a non-trivial unit, since if it were trivial then $\beta \gamma \alpha = kg - 1$ which implies $k^2 g^2 - 2kg + 1 = 0$ which is absurd unless $g = 1$, which then forces $\beta \gamma \alpha \in K$ so $\beta \gamma \alpha = 0$ since it is nilpotent.
\end{proof}

\begin{definition}
    A group $G$ is \emph{residually finite} if for all $1 \neq g \in G$ there exists a homomorphism $\phi_g \colon G \to Q$ to a finite group such that $\phi_g (g) \neq 1$.
\end{definition}

We will see later that the direct finiteness conjecture is true for $K = \C$.
Here we prove:

\begin{proposition}
    \label{proposition:rf_implies_df}
    Let $G$ be residually finite.
    Then $K[G]$ is directly finite.
\end{proposition}

\begin{notation}
For $\alpha \in K[G]$ and $g \in G$, let $(\alpha)_g \in K$ denote the coefficient of $g$ in $\alpha$.
Then $\alpha = \sum_{g \in G} (\alpha)_g \cdot g$ and $(\alpha)_g = 0$ for all but finitely many elements of $G$.
\end{notation}

\begin{definition}
    An element $\alpha \in K[G]$ has \emph{support} \[
        \supp(\alpha) = \set{ g \in G }{ (\alpha)_g \neq 0 }.
    \]
\end{definition}

\begin{proof}
    Suppose $\alpha, \beta \in K[G]$ with $\alpha \beta = 1$.
    A group homomorphism $\phi \colon G \to Q$ induces a ring homomorphism $K[G] \to K[Q]$.
    Thus $K[Q]$ is a $K[G]$-module.
    Note that $Q$ is a basis for the $K$-vector space $K[Q]$, so if $Q$ is finite this is a finite dimensional representation of $G$ on $V = K[Q]$.

    Let $A = \supp(\alpha)$, $B = \supp(\beta)$.
    Let $C = BA = \set{ ba }{ a \in A, b \in B}$.
    By residual finiteness, there is a finite quotient $\phi \colon G \epi Q$ which is injective on $C$: take the product of homomorphisms $\phi_g$ given by the definition over all $g \in C^{-1} C$ (and let $Q$ be the image of this product homomorphism).

    Now the induced maps $\rho_\alpha, \rho_\beta \in \End(V)$ satisfy $\rho_\alpha \circ \rho_\beta = \id_V$ and thus -- since $V = K[Q]$ is finite dimensional -- we have $\rho_\beta \circ \rho_\alpha = \id_V$.

    But we can write $\beta \alpha = \sum_{c \in C} (\beta \alpha)_c \cdot c$ and thus \[
        \rho_{\beta \alpha}(1_Q) = \phi(\beta \alpha) = \sum_{c \in C} (\beta \alpha)_c \cdot \phi(c) = 1_Q
    \] forces (since all $\phi(c)$ are distinct!) \[
        (\beta \alpha)_c = \begin{cases}
            1 & c = 1 \\
            0 & \text{else}
        \end{cases}
    \] that is, $\beta \alpha = 1$.
\end{proof}

\section{Proving the unit conjecture}

There is only one way known to prove the unit conjecture: the unique product property.

\begin{definition}
    A group $G$ has the \emph{unique product property} (or ``has unique products'', or ``has UP'') if for all non-empty finite subsets $A, B \subseteq G$ there exists $g \in G$ such that $g = ab$ for a unique pair $(a, b) \in A \times B$.
\end{definition}

\begin{example}
    In $(\Z, +)$ the ``product'' $\max(A) + \max(B)$ is unique.
\end{example}

\begin{remark}
    A group with UP is torsion-free: if $1 \neq H \leq G$ is a finite subgroup, set $A = B = H$.
    Each product occurs exactly $|H|$ times.
\end{remark}

\begin{proposition}
    A group $G$ with UP satisfies the zero divisor conjecture.
\end{proposition}

\begin{proof}
    Let $\alpha, \beta \in K[G]$ with $\alpha, \beta \neq 0$ and set $A = \supp(\alpha), B = \supp(\beta)$.
    Write
    \begin{align*}
        \alpha = \sum_{a \in A} \lambda_a \cdot a \\
        \beta = \sum_{b \in B} \mu_b \cdot b.
    \end{align*}
    Then if $g_0 = a_0 b_0$ is a unique product for $(A, B)$ we have \[
        (\alpha \beta)_{g_0} = \sum_{gh = g_0} \lambda_g \mu_h = \lambda_{a_0} \mu_{b_0} \neq 0
    \] and thus $\alpha \beta \neq 0$.
\end{proof}

For the unit conjecture we need something that \emph{a priori} is stronger.

\begin{definition}
    A group $G$ has the \emph{two unique products property} if for all finite subsets $A, B \subseteq G$ with $|A| |B| \geq 2$, there exist elements $g_0 \neq g_1$ of $G$ such that $g_0 = a_0 b_0$ for a unique pair $(a_0, b_0) \in A \times B$ and $g_1 = a_1 b_1$ for a unique pair $(a_1, b_1) \in A \times B$.
\end{definition}

\begin{proposition}[Strojnowski]
    The two unique product property is equivalent to the unique product property.
\end{proposition}

\begin{proof}
    TUP $\implies$ UP is immediate (TUP doesn't apply if $|A| = |B| = 1$, but if $|A| = 1$ or $|B| = 1$, then all products are unique!)

    Suppose now $G$ has UP but that finite sets $A, B \subseteq G$ with $|A| |B| \geq 2$ have only $1$ unique product.
    Without loss of generality, by translating $A$ on the left and $B$ on the right, we can assume that $1 = 1 \cdot 1$ is the unique unique product.

    Now let $C = B^{-1} A$, $D = B A^{-1}$.
    We claim that $C \cdot D$ has no unique product, giving the desired contradiction.
    Every element of $CD$ can be written as $b_1^{-1} a_1 b_2 a_2^{-1}$ for some $a_1, a_2 \in A$, $b_1, b_2 \in B$.

    If $(a_1, b_2) \neq (1, 1)$, then by assumption there is another pair $(a_1', b_2')$ with $a_1' b_2' = a_1 b_2$ and thus \[
        (b_1^{-1} a_1) \cdot (b_2 a_2^{-1}) = (b_1^{-1} a_1') \cdot (b_2' a_2^{-1})
    \] is \emph{not} a unique product for $(C, D)$.

    If $(a_1, b_2) = (1, 1)$, then unless $(a_2, b_1) = (1, 1)$ we can write \[
        b_1^{-1} \cdot a_2^{-1} = (a_2 b_1)^{-1} = (a_2' b_1')^{-1} = (b_1')^{-1} (a_2')^{-1}
    \]
    with $a_2 \neq a_2'$ (and $b_1 \neq b_1'$).
    Finally, if $(a_1, b_2) = (1, 1)$ and $(a_2, b_1) = (1, 1)$, then our element of $CD$ is $1 = 1 \cdot 1 = b^{-1} \cdot b = a \cdot a^{-1}$ for any $a \in A$ or $b \in B$.
\end{proof}

\begin{corollary}
    \label{corollary:UP_implies_unit_conjecture}
    A group with UP satisfies the unit conjecture.
\end{corollary}

\begin{proof}
    Exercise.
\end{proof}

Most examples of groups with UP are orderable groups.

\begin{definition}
    A group $G$ is \emph{left-orderable} if it admits a total order $<$ that is left-invariant, that is, $g < h$ implies $kg < kh$ for all $g, h, k \in G$.
\end{definition}

\begin{remark}
    Being left-orderable and right-orderable are equivalent, but admitting a bi-invariant total order is much stronger!
\end{remark}

\begin{proposition}
    A left-orderable group has UP.
\end{proposition}

\begin{proof}
    We show that the maximum of $AB$ is a unique product.
    Let $b_0 = \max B$.
    Then for all $a \in A$ and $b \in B \setminus \{b_0\}$ we have $b < b_0 \implies ab < ab_0$.
    Thus the maximum of $AB$ can only be written as $a \cdot b_0$ and this expression must be unique (as $a_i \neq a_j \implies a_i b_0 \neq a_j b_0$).
\end{proof}

\begin{remark}
    It is \emph{not} necessarily true that $\max(AB) = \max(A) \max(B)$!
\end{remark}

\begin{definition}
    For a left-ordered group $(G, <)$, the set \[
        \cP = \set{ g \in G }{ 1 < g }
    \] is called its \emph{positive cone}.
\end{definition}

The positive cone satisfies
\begin{enumerate}
    \item $\cP^2 \subseteq \cP$ (that is, it is a subsemigroup)
    \item $G = \cP \sqcup \{1\} \sqcup \cP^{-1}$.
\end{enumerate}

\begin{lemma}
    Left-orderings are equivalent to choice of $\cP \subset G$ satisfying (1) and (2).
\end{lemma}

\begin{proof}
    Exercise (hint: $x < y \Leftrightarrow 1 < x^{-1} y$).
\end{proof}

\begin{lemma}
    A group $G$ is left-orderable if and only if for all $g_1, \dots, g_n \in G \setminus \{1\}$ there exists a choice of signs $\epsilon_1, \dots, \epsilon_n \in \{1, -1\}$ such that \[
        1 \notin S(g_1^{\epsilon_1}, \dots, g_n^{\epsilon_n}),
    \] the subsemigroup generated by $g_1^{\epsilon_1}, \dots, g_n^{\epsilon_n}$.
\end{lemma}

\begin{proof}
    $\Rightarrow$ set $\epsilon_i = 1$ if $g_i \in \cP$ (that is, $1 < g_i$) else $-1$.

    $\Leftarrow$ we use compactness (slogan: inverse limit of non-empty finite sets is non-empty).
    Let $X = \{1, -1\}^{G \setminus \{1\}}$ be the set of functions $G \setminus \{1\} \to \{1, -1\}$ and let $A \subset X$ denote those functions that define a positive cone.
    This is equivalent to satisfying (simultaneously!) the choice of sign condition for all possible $g_1, \dots, g_n \in G \setminus \{1\}$ (actually $n = 3$ suffices).
    That is, if we denote such functions $A_{\{g_1, \dots, g_n\}}$ then \[
        A = \bigcap_{\text{finite } S \subset G \setminus \{1\}} A_S.
    \]
    But $X$ is compact by Tychonoff and the $A_S$ are closed (only depend on the restriction to $S \to \{1, -1\}$) and have all finite intersections non-empty by assumption.
    Thus $A \neq \emptyset$.
\end{proof}

We will apply the lemma to prove the following:
\begin{theorem}[Burns--Hale]
    \label{theorem:burns_hale}
    If every finitely generated non-trivial subgroup of $G$ has a non-trivial left-orderable quotient, then $G$ is left-orderable.
\end{theorem}

\begin{definition}
    Let $\mathcal{P}$ be a property of groups.
    A group $G$ is \emph{locally $\mathcal{P}$} if every finitely generated subgroup of $G$ has $\mathcal{P}$.
\end{definition}

We call a group \emph{indicable} if it either maps onto $\Z$ or is trivial.
So the Burns--Hale theorem says in particular that a \emph{locally indicable} group is left-orderable.

\begin{corollary}[Higman, 1940]
    \label{corollary:LI_kaplansky}
    Locally indicable groups satisfy the conjectures on units and zero divisors.
\end{corollary}

\begin{proof}
    Locally indicable $\implies$ left-orderable $\implies$ UP.
\end{proof}

\begin{example}
    The following groups are locally indicable:
    \begin{itemize}
        \item free groups (subgroups of free groups are free by Nielsen--Schreier)
        \item fundamental groups of surfaces of non-positive Euler characteristic
        \item torsion-free nilpotent groups
        \item torsion-free one-relator groups i.e.\ groups of the form $\gp{X}{r}$ where $r \in F(X)$ is not a proper power (Brodskii, Howie)
    \end{itemize}
\end{example}

\begin{proof}[Proof of Burns--Hale theorem]
    Suppose $G$ is not left-orderable and let $n$ be minimal such that there exist $g_1, \dots, g_n \in G \setminus \{1\}$ with $1 \in S(g_1^{\epsilon_1}, \dots, g_n^{\epsilon_n})$ for all choices of $\epsilon_i$.
    Let $H = \gen{g_1, \dots, g_n} \leq G$.
    By assumption, $H$ has a non-trivial left-orderable quotient $q \colon H \epi Q$.
    By relabelling, assume $g_1, \dots, g_t \in \ker(q)$ and $g_{t+1}, \dots, g_n \notin \ker(q)$.
    As $t < n$, we can assign $\epsilon_1, \dots, \epsilon_t$ such that \[
        1 \notin S(g_1^{\epsilon_1}, \dots, g_t^{\epsilon_t}),
    \] and since $Q$ is left-orderable we can assign $\epsilon_{t+1}, \dots, \epsilon_n$ such that \[
        1 \notin S(q(g_{t+1})^{\epsilon_{t+1}}, \dots, q(g_n)^{\epsilon_n}).
    \]
    But this implies that \[
        1 \notin S(g_1^{\epsilon_1}, \dots, g_n^{\epsilon_n})
    \] as every non-empty product of those elements \emph{either} only uses $g_1, \dots, g_t$ so lies in $S(g_1^{\epsilon_1}, \dots, g_t^{\epsilon_t})$ \emph{or} has image under $q$ in $S(q(g_{t+1})^{\epsilon_{t+1}}, \dots, q(g_n)^{\epsilon_n})$.
\end{proof}

\subsection*{The dynamical point of view}

\begin{proposition}
    The group $\Homeo^+(\R)$ of orientation-preserving (i.e.\ increasing) homeomorphisms of the real line is left-orderable.
\end{proposition}

\begin{proof}
    Let $\{x_0, x_1, x_2, \dots\} \subset \R$ be dense (e.g.\ enumerate $\Q$).
    Then we define $f < g$ for $f \neq g \in \Homeo^+(\R)$ by \[
        f < g \Leftrightarrow f(x_i) < g(x_i) \text{ for the minimal } i \in \N \text{ s.t. } f(x_i) \neq g(x_i).
    \]
    (Such an $i$ exists as continuous functions to Hausdorff spaces are determined by their values on dense subsets.)
    Left-invariance is immediate as elements of $\Homeo^+(\R)$ are strictly monotone (and we take $\Homeo^+(\R)$ to act on $\R$ on the left!).
    Let $f, g, h \in \Homeo^+(\R)$ with $f < g$ and $g < h$ and let $i \in \N$ be the minimal index such that $f(x_i) \neq g(x_i)$ or $g(x_i) \neq h(x_i)$.
    Then $f(x_i) \leq g(x_i)$ and $g(x_i) \leq h(x_i)$ with at least one inequality being strict, so $f(x_i) < h(x_i)$.
    Moreover, for $j < i$ we have $f(x_j) = g(x_j) = h(x_j)$, so $f < h$.
\end{proof}

In fact:

\begin{proposition}
    A countable group is left-orderable if and only if it is a subgroup of $\Homeo^+(\R)$.
\end{proposition}

\begin{proof}
    Exercise.
\end{proof}

\begin{proposition}
    Suppose that $N \normal G$ such that $N$ and $G / N$ both have UP.
    Then $G$ has UP.
\end{proposition}

\begin{proof}
    Let $A, B \subset G$ be finite non-empty subsets and write $\phi \colon G \epi G / N$.
    Suppose $\phi(a_1) \cdot \phi(b_1)$ is a unique product for $\phi(A) := \set{\phi(a)}{a \in A}$ and $\phi(B)$ in $G/N$.
    By replacing $A$ with $a_1^{-1} A$ and $B$ with $B b_1^{-1}$, we can assume without loss of generality that $\phi(a_1) = \phi(b_1) = 1$.
    Thus for $a \in A$ and $b \in B$ we have \[
        a b \in N \Leftrightarrow \phi(a b) = 1 \Leftrightarrow \phi(a) = 1 \text{ and } \phi(b) = 1 \Leftrightarrow a \in N \text{ and } b \in N
    \]
    Hence the unique product of the non-empty finite sets $A \cap N$ and $B \cap N$ in the UP group $N$ is a unique product for $A$ and $B$.
\end{proof}

\subsection*{Diffuse groups}

We now meet the weakest property known to imply UP.

\begin{definition}
    Let $A \subset G$ be a finite subset.
    An element $a \in A$ is called \emph{extremal} if for all $1 \neq s \in G$, either $as \notin A$ or $a s^{-1} \notin A$ (or both).
    A group is called \emph{diffuse} if every non-empty finite subset contains an extremal element.
\end{definition}

% TODO add figure showing extremal points on boundary of a disc

\begin{remark}
    \label{remark:diffuse_intersection}
    $a \in A$ is extremal if and only if $a^{-1} A \cap A^{-1} a = \{1\}$.
\end{remark}

\begin{remark}
    This notion has been called ``weakly diffuse'' with diffuse reserved for the \emph{a priori} stronger property that any $A \subset G$ with $2 \leq |A| < \infty$ has at least $2$ extremal points, but they turn out to be equivalent.
\end{remark}

\begin{proposition}
    \label{proposition:LO_diffuse_UP}
    For any group we have the implications \[
        \text{left-orderable} \implies \text{diffuse} \implies \text{UP}.
    \]
\end{proposition}

\begin{proof}
    Suppose $(G, <)$ is left-ordered.
    Let $A \subset G$ be an arbitrary non-empty finite subset and let $a = \max A$.
    For any $1 \neq s \in G$ either $1 < s$ or $1 < s^{-1}$, which implies either $a < a s$ or $a < a s^{-1}$.
    Thus $a$ is extremal.
    Hence $G$ is diffuse.

    Suppose $G$ is diffuse and let $A, B \subset G$ be non-empty finite subsets.
    Consider $C = AB$.
    Let $c \in C$ be an extremal point and pick some $a_1 \in A, b_1 \in B$ such that $c = a_1 b_1$.
    We claim that this is a unique product.
    Suppose for the sake of contradiction that $c = a_2 b_2$ with $b_1 \neq b_2$ (and $a_2 \in A$, $b_2 \in B$).
    Then
    \begin{align*}
        c \cdot (b_2^{-1} b_1) &= a_2 b_2 \cdot (b_2^{-1} b_1) = a_2 b_1 \in C \\
        c \cdot (b_2^{-1} b_1)^{-1} &= a_1 b_1 \cdot (b_1^{-1} b_2) = a_1 b_2 \in C
    \end{align*}
    contradicting diffuseness.
\end{proof}

\begin{remark}
    Given finite $B \subset G$ we can easily decide if all non-empty $A \subseteq B$ have an extremal point because if $a \in A_0 \subseteq A_1$ and $a$ is extremal in $A_1$, then it is also extremal in $A_0$.
    Thus we can run a greedy algorithm, starting with $A = B$ and throwing out all extremal points at each step (checking extremality in finitely many steps via \Cref{remark:diffuse_intersection}), seeing if we terminate with $A = \emptyset$ or with a non-empty set $A$ that falsifies diffuseness.
\end{remark}

\begin{exercise}
    Show that the following classes of groups are closed under taking extensions:
    \begin{itemize}
        \item locally indicable groups
        \item left-orderable groups
        \item diffuse groups
    \end{itemize}
\end{exercise}


\section{Hyperbolic groups}

Geodesics in the hyperbolic plane resemble tripods.
% Note to self: probably should have given a proper definition of tripod.

% TODO add figure of slim triangle and comparison tripod

Given 3 points $a, b, c$ in a metric space, they map isometrically to the vertices $\overline{a}, \overline{b}, \overline{c}$ of a unique tripod with central vertex $\overline{o}$.

The length $d(\overline{o}, \overline{a})$ must be \[
    \frac{1}{2}(d(a, b) + d(a, c) - d(b, c)) =: (b \cdot c)_a
\] which we call the \emph{Gromov product}.
Morally, it measures ``distance to the incircle''.

Let $X$ be a geodesic metric space, i.e. a metric space such that for all $x, y \in X$ there is an isometric embedding $p \colon [0, d(x, y)] \to X$ of an interval (standard metric on $\R$) such that $p(0) = x$ and $p(d(x, y)) = y$.
We denote the image of such a geodesic $p$ from $x$ to $y$ by $[x, y]$.
For a geodesic triangle $\Delta = \Delta(a, b, c)$, define \[
    \chi_\Delta \colon \Delta \to T_\Delta
\] by mapping the three geodesics isometrically to the comparison tripod $T_\Delta$.
For $\delta \geq 0$, $\Delta$ is called \emph{$\delta$-thin} if $p, q \in \chi_\Delta^{-1}(t)$ implies $d(p, q) \leq \delta$ for all $t \in T_\Delta$.

\begin{definition}
    Let $\delta \geq 0$.
    A geodesic metric space $X$ is called \emph{$\delta$-hyperbolic} if every geodesic triangle is $\delta$-thin.
    $X$ is called \emph{(Gromov) hyperbolic} if it is $\delta$-hyperbolic for some $\delta \geq 0$.
\end{definition}

\begin{example}
    A tree is $0$-hyperbolic.
\end{example}

\begin{warning}
    There are multiple equivalent definitions of hyperbolicity, but the constant $\delta$ will need to change in general.
\end{warning}

\begin{definition}
    A group $G$ is called \emph{hyperbolic} if it acts properly cocompactly by isometries on a proper geodesic hyperbolic space.
\end{definition}

\begin{example}
    \begin{itemize}
        \item A free group acting a tree (deck transformations on universal cover of rose graph).
        % TODO add figure of Cayley graph of F_2?
        \item The fundamental group of a closed hyperbolic surface acting on the hyperbolic plane.
    \end{itemize}
\end{example}

\begin{definition}
    An action $G \acts X$ by homeomorphisms of a topological space is called \emph{proper} if for all compact $K \subseteq X$, the set $\set{g \in G}{gK \cap K \neq \emptyset}$ is finite.
    It is called \emph{cocompact} if there exists compact $K \subseteq X$ such that $X = G \cdot K$.
\end{definition}

\begin{definition}
    A metric space $X$ is called \emph{proper} if for all $x \in X$ and for all $r \geq 0$, the closed ball $\overline{B}(x, r) := \set{y \in X}{d(x, y) \leq r}$ is compact.
\end{definition}

\begin{remark}
    \label{remark:geometric_actions}
    For a proper metric space $X$, an action $G \acts X$ is proper if and only if for all $x \in X$ and $r \geq 0$, the set $\set{g \in G}{d(g \cdot x, x) \leq r}$ is finite and it is cocompact if and only if for all $x \in X$ there exists $r \geq 0$ such that $X = G \cdot \overline{B}(x, r)$.
\end{remark}

\begin{lemma}
    \label{lemma:geometric_action_conjugacy_classes}
    Let $G \acts X$ be a proper cocompact action by isometries on a proper metric space.
    Let $R \geq 0$.
    Then \[
        S_R = \set{g \in G}{\Exists x \in X \text{ s.t. } d(g \cdot x, x) \leq R}
    \] consists of finitely many conjugacy classes.
    % Note to self: next time teaching this, just introduce translation length!
    % In particular, it's much nicer to say "translation length is a conjugacy invariant".
\end{lemma}

\begin{proof}
    Pick some basepoint $x_0 \in X$.
    By cocompactness, there exists $r_0 \geq 0$ such that $X = G \cdot \overline{B}(x_0, r_0)$.
    Suppose $g \in G$ and $x \in X$ with $d(g \cdot x, x) \leq R$.
    Since $X = G \cdot \overline{B}(x_0, r_0)$, there exists $h \in G$ such that $x_1 := h^{-1} \cdot x \in \overline{B}(x_0, r_0)$.
    Then \[
        d(g^h \cdot x_1, x_1) = d(h^{-1} g h \cdot (h^{-1} \cdot x), h^{-1} \cdot x) = d(h^{-1} g x, h^{-1} x) = d(g \cdot x, x) \leq R
    \] and thus \[
        d(g^h \cdot x_0, x_0) \leq d(g^h \cdot x_0, g^h \cdot x_1) + d(g^h \cdot x_1, x_1) + d(x_1, x_0) \leq 2r_0 + R
    \] so by properness there are only finitely many possibilities for $g^h$.
    Thus the elements of $S_R$ are contained in finitely many conjugacy classes.
    Since $d(g^h \cdot (h^{-1} \cdot x), h^{-1} \cdot x) = d(g \cdot x, x)$ for all $g, h \in G$ and $x \in X$, we note that $S_R$ will be a union of conjugacy classes.


\end{proof}

\begin{definition}[4-point condition]
    Let $\delta \geq 0$.
    A metric space $X$ is $(\delta)$-hyperbolic if
    \begin{equation}\label{equation:fourpoint}
        (x \cdot y)_w \geq \min\{ (x \cdot z)_w, (y \cdot z)_w \} - \delta \tag{$\ast$}
    \end{equation}
    for all $w, x, y, z \in X$.
\end{definition}

\begin{remark}
    This definition is arguably less intuitive, but it also works for non-geodesic metric spaces e.g.\ discrete metric spaces.
\end{remark}

\begin{proposition}
    \label{proposition:comparing_deltas}
    Let $X$ be a geodesic metric space.
    Then
    \begin{enumerate}
        \item[(i)] $X$ is $(\delta)$-hyperbolic $\implies$ $X$ is $4\delta$-hyperbolic.
        \item[(ii)] $X$ is $\delta$-hyperbolic $\implies$ $X$ is $(\delta)$-hyperbolic.
    \end{enumerate}
\end{proposition}

\begin{proof}
    (i) is left as an exercise.

    Hint: Suppose that $p \in [x, y]$ and $q \in [x, z]$ with $d(x, p) = d(x, q) \leq (y \cdot z)_x$.
    Prove the required inequality $d(p, q) \leq 4\delta$ by bounding $(p \cdot q)_x$ from below by first proving the general fact that, for all $a, b, c, d, w \in X$, we have \[
        (a \cdot d)_w \geq \min\{(a \cdot b)_w, (b \cdot c)_w, (c \cdot d)_w\} - 2\delta.
    \]

    (ii) Pick $x'$ on a geodesic $[w, x]$, $y'$ on $[w, y]$ and $z'$ on $[w, z]$ such that \[
        d(w, x') = d(w, y') = d(w, z') = \min\{ (x \cdot z)_w, (y \cdot z)_w \}.
    \]
    % TODO add figure
    By $\delta$-thinness of $\Delta(w, x, z)$ we have $d(x', z') \leq \delta$ and similarly $d(z', y') \leq \delta$ so that $d(x', y') \leq 2\delta$.
    Thus \[
        d(x, y) \leq d(x, x') + 2\delta + d(y, y')
    \] but by construction
    \begin{align*}
        d(x, x') &= d(w, x) - \min\{ (x \cdot z)_w, (y \cdot z)_w \} \\
        d(y, y') &= d(w, y) - \min\{ (x \cdot z)_w, (y \cdot z)_w \}
    \end{align*}
    so that \[
        d(x, y) \leq d(w, x) + d(w, y) - 2\min\{ (x \cdot z)_w, (y \cdot z)_w \} + 2 \delta
    \] which says precisely that \[
        (x \cdot y)_w \geq \min\{ (x \cdot z)_w, (y \cdot z)_w \} - \delta.
    \]
\end{proof}

Let's repackage the 4-point condition to be symmetric: we have that
\begin{align}
    \label{equation:unpackaged_fourpoint1}
    (x \cdot y)_w
        &\geq (x \cdot z)_w - \delta \\
    \label{equation:unpackaged_fourpoint2}
    \text{or} \qquad (x \cdot y)_w
        &\geq (y \cdot z)_w - \delta
\end{align}
(or both).
Inequality~\eqref{equation:unpackaged_fourpoint1} says
\begin{align*}
    d(w, x) + d(w, y) - d(x, y)
        &\geq d(w, x) + d(w, z) - d(x, z) - 2\delta \\
    \Leftrightarrow \qquad \qquad d(w, z) + d(x, y)
        &\leq d(w, y) + d(x, z) + 2\delta.
\end{align*}
So similarly rewriting \eqref{equation:unpackaged_fourpoint2} and combining the two possibilities, we see that the 4-point condition \eqref{equation:fourpoint} is equivalent to \begin{equation}
    \label{equation:symmetric_fourpoint}
    d(w, z) + d(x, y) \leq \max \{ d(w, y) + d(x, z), d(w, x) + d(y, z) \} + 2\delta. \tag{$\diamond$}
\end{equation}
There are $3$ ways to partition $\{w, x, y, z\}$ into pairs, all of which occur in the previous equation.
Suppose $S \leq M \leq L$ are the corresponding sums of opposite edge lengths.
Then \eqref{equation:fourpoint} is equivalent (considering permutations of the $4$ points) to the assertion $L \leq M + 2\delta$.

\begin{theorem}[Delzant]
    \label{theorem:delzant}
    Let $X$ be a $\delta$-hyperbolic geodesic metric space (in the sense of thin triangles) and suppose that $G \acts X$ by isometries such that for all $1 \neq g \in G$ and for all $x \in X$, we have \[
        d(x, g \cdot x) > 3 \delta.
    \]
    Then $G$ is diffuse.
\end{theorem}

\begin{proof}
    We claim that for all $g \in G$, $1 \neq h \in G$ and $p \in X$ we have either \begin{align*}
        d(gh \cdot p, p)
            &> d(g \cdot p, p) \\
        \text{or} \qquad
        d(gh^{-1} \cdot p, p)
            &> d(g \cdot p, p). \\
    \end{align*}
    Then we are done because for finite $A \subseteq G$ and any $p \in X$, an element $a \in A$ achieving $\max_{a \in A} d(g \cdot p, p)$ will be extremal.

    Suppose for the sake of contradiction that
    \begin{equation}
        \label{equation:delzant_absurdum}
        d(g \cdot p, p) \geq d(gh \cdot p, p), d(gh^{-1} \cdot p, p).
    \end{equation}
    Consider the symmetric 4-point condition \eqref{equation:symmetric_fourpoint} on $p, g \cdot p, gh \cdot p, gh^{-1} \cdot p$.
    (Note that $X$ is assumed $\delta$-hyperbolic and is thus $(\delta)$-hyperbolic by \Cref{proposition:comparing_deltas}.)
    The three possible sums are (since $G \acts X$ by isometries):
    \begin{align*}
        d(g \cdot p, p) + d(dg^{-1} \cdot p, gh \cdot p)
        &= d(g \cdot p, p) + d(h^2 \cdot p, p) \\
        d(gh \cdot p, p) + d(g \cdot p, gh^{-1} \cdot p)
        &= d(gh \cdot p, p) + d(h \cdot p, p) \\
        d(gh^{-1} \cdot p, p) + d(g \cdot p, gh \cdot p)
        &= d(gh^{-1} \cdot p, p) + d(h \cdot p, p).
    \end{align*}
    If we assume $d(h^2 \cdot p, p) \geq d(h \cdot p, p)$, then together with \eqref{equation:delzant_absurdum} this implies that the first term is the largest and thus the 4-point condition says
    \begin{align*}
        d(g \cdot p, p) + d(h^2 \cdot p, p)
        & \leq d(g h^{\pm 1} p, p) + d(h \cdot p, p) + 2\delta \\
        & \leq d(g \cdot p, p) + d(h \cdot p, p) + 2\delta.
    \end{align*}
    So in either case, we have $d(h^2 \cdot p, p) \leq d(h \cdot p, p) + 2\delta$.
    Thus \[
        (h \cdot p, h^{-1} \cdot p)_p \geq \frac{1}{2} d(h \cdot p, p) - \delta.
    \]
    Take any geodesic $[p, h^{-1} \cdot p]$ and translate it by $h$ to get a preferred geodesic $[h \cdot p, p]$.
    If we let $q$ be the midpoint of $[p, h^{-1} \cdot p]$ and then let $q', q''$ lie on $[q, p]$ respectively $[h \cdot q, p] \subset [h \cdot p, p]$ at distance $\delta$ from $q$ respectively $h \cdot q$, we have $d(q', q'') \leq \delta$ by $\delta$-thinness of $\Delta(h^{-1} \cdot p, p, h \cdot p)$.
    But now \[
        d(h \cdot q, q) \leq d(h \cdot q, q'') + d(q'', q') + d(q', q) \leq 3\delta,
    \] a contradiction.

\end{proof}

\begin{corollary}
    Let $G$ be a residually finite hyperbolic group.
    Then $G$ is virtually diffuse.
\end{corollary}

\begin{remark}
    It is a famous open problem whether all hyperbolic groups are residually finite.
\end{remark}

\begin{proof}
    Let $G \acts X$ properly cocompactly by isometries, where $X$ is a proper geodesic $\delta$-hyperbolic metric space.
    By \Cref{lemma:geometric_action_conjugacy_classes} there exist $1 = g_0, g_1, \dots, g_n \in G$ such that for all $g \in G$, if there exists $x \in X$ with $d(g \cdot x, x) \leq 3\delta$ then $g \sim g_i$ for some $i$.
    By residual finiteness we can find $\phi \colon G \epi Q$, $Q$ finite, such that $\phi(g_1), \dots, \phi(g_n) \neq 1$.
    Then $G_0 = \ker(\phi)$ satisfies the assumptions of Delzant's \cref{theorem:delzant}.
\end{proof}

We note one consequence of this corollary of general interest (i.e.\ beyond studying group rings).
\begin{corollary}
    A residually finite hyperbolic group is virtually torsion-free.
\end{corollary}

\begin{exercise}
    Verify \Cref{remark:geometric_actions} (translating between topological and metric conditions).
\end{exercise}

\section{Primality of group rings}

Our aim is to give a complete proof of the following, which was used to show that the unit conjecture for $K[G]$ implies the zero divisor conjecture for $K[G]$.

\begin{theorem}[Connell]
    $K[G]$ is prime if and only if $G$ has no non-trivial finite normal subgroup.
\end{theorem}

Recall that a ring $R$ is \emph{prime} if for all $\alpha, \beta \in R \setminus \{0\}$ there exists $\gamma \in R$ such that $\alpha \gamma \beta \neq 0$ (that is, the zero ideal is a prime ideal in the sense of non-commutative ring theory).

To get there we need some group ring basics, a fair bit of group theory and an ingenious trick of Passman.

\begin{definition}
    Let $H \leq G$.
    Then the projection $\pi_H \colon K[G] \to K[H]$ is defined by \[
        \pi_H(\sum_{g \in G} a_g g) = \sum_{g \in H} a_g g.
    \]
\end{definition}

Warning: this is never a ring homomorphism for $H \lneq G$! But we do have:

\begin{lemma}
    \label{lem:KH_bimodule_hom}
    $\pi_H$ is a homomorphism of $(K[H], K[H])$-bimodules.
\end{lemma}

\begin{proof}
    Exercise.
\end{proof}

\begin{corollary}
    Let $H \leq G$.
    If $\alpha \in K[H]$ is a unit in $K[G]$, then it is a unit in $K[H]$.
\end{corollary}

\begin{proof}
    For $\beta \in K[G]$ with $\alpha \beta = \beta \alpha = 1$ we have \[
        \alpha \pi_H(\beta) = \pi_H(\alpha \beta) = 1 = \pi_H(\beta \alpha) = \pi_H(\beta) \alpha
    \] so in fact $\alpha^{-1} = \beta = \pi_H(\beta) \in K[H]$.
\end{proof}

Recall that a \emph{left transversal} for $H \leq G$ is a set $X$ containing exactly one representative $x$ of each left coset of $H$, so that $G = \sqcup_{x \in X} x H$.

\begin{lemma}
    Let $X$ be a left transversal for $H$ in $G$.
    Then every element $\alpha \in K[G]$ can be written uniquely as a finite sum \[
        \alpha = \sum_{x \in X} x \alpha_x
    \] with $\alpha_x \in K[H]$. In fact, $\alpha_x = \pi_H(x^{-1} \alpha)$.
    Thus $K[G]$ is a free right $K[H]$-module with $X$ as a basis.
\end{lemma}

\begin{proof}
    Exercise.
\end{proof}

Recall that $M_n(R)$ denotes the ring of $n \times n$ matrices over a ring $R$.

\begin{lemma}
    \label{lemma:KG_in_MnKH}
    Let $[G : H] = n < \infty$.
    Then $K[G] \hookrightarrow M_n(K[H])$.
\end{lemma}

\begin{proof}
    Let $X = \{x_1, \dots, x_n\}$ be a left transversal for $H$ in $G$.
    Then $V = K[G]$ is a free right $K[H]$-module with basis $X$.
    It is also a left $K[G]$-module and since left and right multiplication commute, $K[G]$ acts by $K[H]$-linear transformations of $V \cong K[H]^n$.
    Since for each $\alpha \in K[G]$ and each index $j$ we have \[
        \alpha x_j = \sum_{i=1}^n x_i \pi_H(x_i^{-1} \alpha x_j),
    \] sending the element $\alpha$ to the matrix \[
        \eta_X(\alpha) := \left( \pi_H(x_i^{-1} \alpha x_j) \right)_{ij}
    \] defines the embedding (for choice of basis $X$).

\end{proof}

\begin{remark}
    If $G$ is finite and $H = 1$ then this is just the regular representation.
\end{remark}

\begin{example}
    Let $D_\infty = \gp{r, t}{r^2 = 1, t^r = t^{-1}} = \Z \rtimes \Z/2$ and take $X = \{1, r\}$ as the obvious left transversal for $\gen{t} = \Z$.
    Then since $r \cdot 1 = r, r \cdot r = 1 \cdot 1, t \cdot 1 = 1 \cdot t, t \cdot r = r \cdot t^{-1}$, we have $K[D_\infty] \to M_2(K[t, t^{-1}])$ given by extending \[
        r \mapsto \begin{pmatrix} 0 & 1 \\ 1 & 0 \end{pmatrix},
        \quad
        t \mapsto \begin{pmatrix} t & 0 \\ 0 & t^{-1} \end{pmatrix}.
    \]
\end{example}

The first bit of group theory is:

\begin{lemma}[Schur]
    \label{lemma:schur}
    If $[G : Z(G)] < \infty$ then $|G'|$ is finite.
\end{lemma}

\begin{definition}
    Let $H \leq G$ with $[G : H] = n < \infty$.
    Pick a left transversal $\{x_1, \dots, x_n\}$ for $H$.
    For each $g \in G$ and $1 \leq j \leq n$, we have $g x_j = x_i h_j$ for some unique $h_j \in H$.
    The \emph{transfer} is defined as the map $G / G' \to H / H'$ given by \[
        g \mapsto h_1 \dots h_n H'.
    \]
\end{definition}

\begin{lemma}
    The transfer is a group homomorphism and does not depend on the choice of transversal.
\end{lemma}

\begin{proof}
    Map $K[G] \to M_n(K[H])$ via \cref{lemma:KG_in_MnKH}, $M_n(K[H]) \to M_n(K[H/H'])$ by extending $K[H] \to K[H/H']$, and $M_n(K[H/H']) \to K[H/H']$ via the determinant.
    For given $g \in G$ and $1 \leq j \leq n$, with $g x_j = x_i h_j \Leftrightarrow h_j = x_i^{-1} g x_j$, the $j$-th column of $\eta_X(g)$ contains $h_j$ in row $i$, otherwise zeroes.
    Letting $\operatorname{sgn}(g)$ denote the sign of the permutation $g$ induces on the set $G / H$, we have that the composition $G \to K[H/H']$ so defined maps \[
        g \mapsto \operatorname{sgn}(g) h_1 \dots h_n \in K[H / H']
    \]
    where the image is moreover a trivial unit.
    The group of trivial units is $K^\times \times H / H'$ so we can project onto the second factor to obtain our map \[
        G \to H / H' \colon g \mapsto h_1 \dots h_n.
    \]
    As the image is abelian, it factors through $G/G'$ to define the transfer.
    It is independent of the choice of transversal since change of basis of $K[G]$ produces similar matrices in $M_n(K[H])$, whose images in $M_n(K[H/H'])$ will have the same determinant.

\end{proof}

\begin{proof}[Proof of Schur's lemma]
    Let $Z = Z(G)$.
    Consider the transfer map $G / G' \to Z / Z' = Z$.
    By centrality of $Z$, for $g \in Z$ this is simply $g \mapsto g^n$ (in fact, one can show this for all $g \in G$).
    Thus $g \in G' \cap Z$ implies $g^n = 1$.
    If $x_1, \dots, x_n$ is a transversal, then every commutator is of the form $[x_i z_1, x_j z_2] = [x_i, x_j]$ (for some $z_1, z_2 \in Z$) and thus $G'$ is finitely generated.
    Now $[G' : G' \cap Z] \leq n$ so $G' \cap Z$ is finitely generated, finite exponent and abelian, thus finite.
    Thus $G'$ is finite.
\end{proof}

\begin{definition}
    The \emph{FC-centre} of a group $G$ is \[
        \Delta(G) = \{ g \in G : |g^G| < \infty \},
    \] the set of elements whose conjugacy class is finite.
\end{definition}

This is alternatively the set of elements $g$ whose centralizer $C_G(g)$ is finite index (by orbit-stabilizer theorem for $G \curvearrowright G$).
As $C_G(gh) \geq C_G(g) \cap C_G(h)$ and $[G : C_G(g) \cap C_G(h)] \leq [G : C_G(g)] [G : C_G(h)]$ for all $g, h \in G$, we see that $\Delta(G)$ is a (characteristic) subgroup of $G$.

We call $G$ an \emph{FC-group} if $G = \Delta(G)$.
Note that $\Delta(\Delta(G)) = \Delta(G)$, i.e. the FC-centre is an FC-group.

\begin{lemma}
    \label{lemma:fc_is_locally_finite_by_free_abelian}
    An FC-group is locally finite-by-(free abelian).
\end{lemma}

\begin{proof}
    Let $H = \langle h_1, \dots, h_n \rangle \leq G$.
    Then $C_G(H) = \cap_{i=1}^n C_G(h_i)$ is finite index in $G$ and thus $Z(H) = C_G(H) \cap H$ is finite index in $H$.
    Thus Schur's lemma implies that $H'$ is finite.
    Now $H / H'$ is a finitely generated abelian group so it has the form $T \oplus \mathbb{Z}^d$ where $T$ is finite.
    Thus the kernel of the composition $H \to \mathbb{Z}^d$ is finite.
\end{proof}

\begin{remark}
    The torsion elements of an abelian group form a characteristic subgroup, so any group (finitely generated or not) has a well-defined torsion-free abelianization.
\end{remark}

\begin{corollary}
    A torsion-free virtually cyclic is cyclic.
\end{corollary}

\begin{proof}
    Let $G$ be torsion-free and virtually cyclic with $G_0 = \gen{t}$ a finite index subgroup.
    (If $G_0$ is finite, then $G$ is finite and thus trivial.)
    We claim that $G$ is an FC-group.
    For any $1 \neq g \in G$ there exists $n \geq 1$ such that $g^n \in G_0$, i.e. $g^n = t^m$ for some $m \in \Z$.
    By torsion-freeness $m \neq 0$ and thus $C_G(g)$ contains $\gen{t^m}$ which is finite index in $G_0$ and thus in $G$.

    A virtually finitely generated group is finitely generated so \cref{lemma:fc_is_locally_finite_by_free_abelian} applies.
    Now we are done by the classification of finitely generated abelian groups.
\end{proof}

\begin{remark}
    A torsion-free virtually abelian group need not be abelian, e.g.\ the fundamental group $\Z \rtimes \Z$ of the Klein bottle.
\end{remark}

We now have the tools to prove the following result on the torsion of $\Delta(G)$, \[
    \Delta^+(G) := \{g \in \Delta(G) : \operatorname{ord}(g) < \infty \}.
\]

\begin{lemma}[B.H. Neumann]
    \label{lemma:neumann_fc}
    $\Delta^+(G)$ is a characteristic subgroup of $G$ and $\Delta(G) / \Delta^+(G)$ is torsion-free abelian.
\end{lemma}

\begin{proof}
    If $g, h \in \Delta^+(G)$ then the generators of $H = \langle g, h \rangle$ are both in the kernel of its torsion-free abelianization, so $H$ is finite.
    Thus $\Delta^+(G)$ is a subgroup, which is clearly characteristic.

    Since $\Delta^+(G)$ contains \emph{precisely} the torsion elements of $\Delta(G)$, the quotient $\Delta(G) / \Delta^+(G)$ is torsion-free.
    For any $H = \langle g, h \rangle \leq \Delta(G)$, we have that $H'$ is finite by \cref{lemma:fc_is_locally_finite_by_free_abelian} and thus $H' \leq \Delta^+(G)$, so $\Delta(G) / \Delta^+(G)$ is abelian.
\end{proof}

\begin{lemma}
    \label{lemma:ncls_finite_delta}
    If $x_1, \dots, x_n \in \Delta^+(G)$ then the normal closure $N = \ncls{x_1, \dots, x_n}_G$ is finite.
\end{lemma}

\begin{proof}
    $N$ is generated by the finitely many conjugates in $G$ of the $x_i$, which are all in the kernel of the torsion-free abelianization of $N$, so we are done by \cref{lemma:fc_is_locally_finite_by_free_abelian}.
\end{proof}

\begin{lemma}[B.H. Neumann]
    \label{lemma:neumann_cosets}
    Let $G$ be a group and $H_1, \dots, H_n \leq G$.
    Suppose there exist finitely many (left) cosets $g_{ij} H_i$ such that \[
        G = \bigcup_{i,j} g_{ij} H_i.
    \]
    The some $[G : H_i] < \infty$.
\end{lemma}

\begin{proof}
    We proceed by induction on $n$.
    The base case $n=1$ is clear.
    Suppose $n \geq 2$.
    If all (right) cosets of $H_n$ occur, then $[G : H_n] < \infty$.
    If not, then let $g H_n$ be such that $g H_n \neq g_{nj} H_n$ for all $j$, which gives $g H_n \cap g_{nj} H_n = \emptyset$ for all $j$.
    Thus \[
        g H_n \subseteq \bigcup_{i \leq n-1, k} g_{ik} H_i.
    \]
    Now replace each $g_{nj} H_n$ with $\set{g_{nj} g^{-1} g_{ik} H_i}{i \leq n-1}$ to write $G$ as a finite union of cosets of $H_1, \dots, H_{n-1}$.
\end{proof}

This result is similarly true for right cosets.

The final ingredient is:
\begin{theorem}[Passman]
    Suppose that $\alpha, \beta \in K[G]$ such that $\alpha \gamma \beta = 0$ for all $\gamma \in K[G]$.
    Then $\pi_{\Delta(G)}(\alpha) \pi_{\Delta(G)}(\beta) = 0$.
\end{theorem}

\begin{proof}[Proof of Connell's Theorem]
    If $H \normal G$ is finite then let $\alpha = \sum_{h \in H} h \in K[G]$.
    Note that $\alpha \in Z(K[G])$ and $\alpha^2 = |H| \alpha$.
    Thus $\alpha \gamma (\alpha - |H|) = 0$ for all $\gamma \in K[G]$, so $K[G]$ is not prime.

    If $G$ has no non-trivial finite normal subgroup, then by \cref{lemma:ncls_finite_delta} we have $\Delta^+(G) = 1$ and thus by Neumann's \cref{lemma:neumann_fc} $\Delta(G)$ is torsion-free abelian.
    Suppose that $0 \neq \alpha, \beta \in K[G]$ with $\alpha \gamma \beta = 0$ for all $\gamma \in K[G]$.
    By choosing some $g \in \supp(\alpha), h \in \supp(\beta)$ and replacing $\alpha$ with $g^{-1} \alpha$ and $\beta$ with $\beta h^{-1}$, we can assume without loss of generality that $1 \in \supp(\alpha)$ and $1 \in \supp(\beta)$.
    Thus $\pi_{\Delta(G)}(\alpha), \pi_{\Delta(G)}(\beta) \neq 0$ but by Passman's theorem their product is zero.
    This is impossible as $\Delta(G)$ is torsion-free abelian so $K[\Delta(G)]$ satisfies the zero divisor conjecture.
\end{proof}

\begin{proof}[Proof of Passman's Theorem]
    Let $\Delta = \Delta(G)$.
    It suffices to prove that $\pi_\Delta(\alpha) \beta = 0$ since then \[
        0 = \pi_\Delta\left( \pi_\Delta(\alpha) \beta \right) = \pi_\Delta(\alpha) \pi_\Delta(\beta)
    \] (as $\pi_\Delta$ is a homomorphism of $K[\Delta]$-bimodules, \cref{lem:KH_bimodule_hom}).

    Write $\alpha = \alpha_0 + \alpha_1$ where $\alpha_0 = \pi_\Delta(\alpha)$.
    Suppose for the sake of contradiction that $\alpha_0 \beta \neq 0$ and fix some $g_0 \in \supp(\alpha_0 \beta)$.
    The assumption on $\alpha$ and $\beta$ is equivalent to saying \[
        x^{-1} (\alpha_0 + \alpha_1) x \beta = 0
    \] for all $x \in G$.
    If $x \in C_G(\supp(\alpha_0))$ then this simplifies to \[
        x^{-1} \alpha_1 x \beta = - \alpha_0 \beta
    \] so that $g_0 \in \supp(x^{-1} \alpha_1 x \beta)$.
    Let
    \begin{align*}
        \supp(\alpha_1) &= \{ v_1, \dots, v_m \} \\
        \supp(\beta) &= \{ w_1, \dots, w_n \}
    \end{align*}
    So if $x \in C_G(\supp(\alpha_0))$ there exist $1 \leq i \leq m, 1 \leq j \leq n$ such that \[
        x^{-1} v_i x w_j = g_0.
    \]
    If $g_{ij}$ is some solution in $x$ to $v_i^x = g_0 w_j^{-1}$, then the set of solutions is precisely the coset $C_G(v_i) g_{ij}$.

    Now the definition of $\Delta$ guarantees that \[
        C := C_G(\supp(\alpha_0)) = \bigcap_{g \in \supp(\alpha_0)} C_G(g)
    \] is finite index in $G$ whereas for $v_i \in \supp(\alpha_1)$ we have $[G : C_G(v_i)] = \infty$ which implies $[C : C \cap C_G(v_i)] = \infty$ too.
    If every $x \in C$ lies in some $C_G(v_i) g_{ij}$, then $C$ can be written as a finite union of cosets of infinite index subgroups, contradicting Neumann's \cref{lemma:neumann_cosets}.

\end{proof}

\begin{exercise}
    Let \[
        T(G) = \set{g \in G}{\operatorname{ord}(g) < \infty}
    \] denote the set of torsion of the group $G$.
    \begin{enumerate}
        \item Show that if $G / N$ is torsion-free then $T(G) \subseteq N$.
        \item Show that if $T(G)$ is a subgroup of $G$, then $G / T(G)$ is torsion-free.
        \item Show that if $T(G)$ is finite, then it is indeed a subgroup. (Hint: consider the FC-centre $\Delta(G)$.)
    \end{enumerate}
    % Would be nice to have an easy example where $G / \ncls(T(G))$ is not torsion-free, but all I can think of is adjoining a root to the infinite dihedral group, and this surely needs Bass--Serre theory.
    % Actually: with enough theory of polycyclic groups we should be fine, since adjoining a square root in $D_\infty$ is polycyclic.
    % Introducing the theory of torsion-length (e.g. Chiodo) is surely too much at this point.
\end{exercise}

\begin{exercise}
    Suppose that $g, h, x_0 \in G$ satisfy $g^{x_0} = h$.
    Show that \[
        \set{x \in G}{g^x = h} = C_G(g) x_0.
    \]
\end{exercise}

\begin{exercise}
    Let $[G : G_0] < \infty$.
    Prove or disprove: If $G_0$ is an FC-group, then $G$ is an FC-group.
\end{exercise}

\begin{exercise}
    Consider the group ring $\F_2[\Z/3]$.
    \begin{enumerate}
        \item Does is contain zero-divisors?
        \item Does is contain non-trivial units?
        \item Does this contradict anything we proved?
    \end{enumerate}
\end{exercise}


\section{Traces}

\begin{exercise}
    Let $G = S_3 = D_6$ generated by $r = (1 2 3)$ and $s = (1 2)$.
    We can present $G$ as $\gp{r, s}{r^3, s^2, r^s = r^{-1}}$.
    Let $\omega \in \C$ be a primitive cube root of $1$.
    Consider the elements
    \begin{align*}
        f_1 &= 1 + r + r^{-1} \\
        f_\omega &= 1 + \omega r + \omega^{-1} r^{-1} \\
        f_{\omega^{-1}} &= 1 + \omega^{-1} r + \omega r^{-1}
    \end{align*}
    of $\C[G]$ and let \[
        e = \frac{1}{6} f_\omega (1 + s).
    \]
    \begin{enumerate}
        \item Verify that $\frac{1}{3} f_1, \frac{1}{3} f_\omega, \frac{1}{3} f_{\omega^{-1}}$ are all self-adjoint idempotents.
        \item Show that $f_1 + f_\omega + f_\omega^{-1} = 3$.
        \item Show that $f_\omega f_1 = 0$.
        \item Show that $(1 + s) f_\omega = f_\omega + f_{\omega^{-1}} s$.
        \item Show that $e$ is an idempotent. (Hint: apply the previous three calculations!)
        \item Check that $e$ is not self-adjoint and verify moreover that $\langle e, 1 - e \rangle \neq 0$.
    \end{enumerate}
    % This idempotent is just the matrix
    %   1 1
    %   0 0
    % under the representation sending r to diag(w, w^-1) and s to a permutation matrix.
\end{exercise}

\section{The unit conjecture counterexample}

Rips and Segev (1987) gave the first example of a torsion-free group without unique products, using small cancellation theory ($\abs{A} = 4$ and $B$ is huge).
Promislow showed shortly thereafter (1988) that the crystallographic group \[
    P = \gp{a, b}{b^{-1} a^2 b = a^{-2}, a^{-1} b^2 a = b^{-2}}
\]
does not have unique products, with $A = B$, $\abs{A} = 14$.
In 2021, it was shown that $K[P]$ is a counterexample to the unit conjecture whenever $\chr\ K > 0$ (Gardam, Murray).

Let $D_\infty = \gp{r, t}{r^2 = 1, t^r = t^{-1}}$ denote the infinite dihedral group.
It naturally acts on $\R$ (isometrically) via $t \cdot x = x+1$ and $r \cdot x = -x$ (``translate'' and ``rotate'').

\begin{lemma}
    \label{lemma:promislow_embedding}
    \begin{align*}
        \phi \colon P &\to D_\infty \times D_\infty \times D_\infty \\
        a &\mapsto (t, tr, r) \\
        b &\mapsto (r, t, tr)
    \end{align*}
    is an injective group homomorphism.
\end{lemma}

\begin{remark}
    The stabilizer of $K^n \times \{1\}$ in $GL(K^n \oplus K)$ is $\Aff(K^n)$.
    This lets us rephrase the above embedding as the faithful representation \[
        a \mapsto \begin{pmatrix}
            1 &    &    & 1 \\
              & -1 &    & 1 \\
              &    & -1 & 0 \\
              &    &    & 1
        \end{pmatrix},
        \quad
        b \mapsto \begin{pmatrix}
            -1 &   &    & 0 \\
               & 1 &    & 1 \\
               &   & -1 & 1 \\
               &   &    & 1
        \end{pmatrix}.
     \]
\end{remark}

\begin{proof}[Proof of \Cref{lemma:promislow_embedding}]
    Note that $\phi(a^2) = (t^2, 1, 1)$ so that $\phi(b^{-1} a^2 b) = (r^{-1} t^2 r, 1, 1) = (t^{-2}, 1, 1) = \phi(a^{-2})$.
    Similarly $\phi(a^{-1} b^2 a) = \phi(b^{-2})$, so this is a well-defined group homomorphism.

    Since $(a^2)^b = a^{-2}$, we have $b \in N_P(\gen{a^2})$, thus $\gen{a^2} \normal P$ and likewise $\gen{b^2} \normal P$.
    As $(a^2)^{b^2} = (a^{-2})^b = a^2$, we see that $\Z^2 \cong \gen{a^2, b^2} \normal P$.
    The relations of $P$ are a consequence (in general) of $a^2 = 1$ and $b^2 = 1$ respectively, so $P / \gen{a^2, b^2} \cong \gp{a, b}{a^2, b^2} \cong D_\infty$.
    The abelianization of $D_\infty$ is $\Z/2 \oplus \Z/2$ with $[D_\infty, D_\infty] = \gen{abab} \cong \Z$ (exercise!).
    Let $x = a^2, y = b^2, z = (ab)^2$.
    Now $x^z = (a^2)^{abab} = (a^2)^{bab} = (a^{-2})^{ab} = (a^{-2})^b = a^2 = x$ and similarly $y^z = y$.
    Thus $\gen{x, y, z} \cong \Z^3$ is a normal subgroup of $P$ with quotient $\Z/2 \oplus \Z/2$.

    Since $\phi(x) = (t^2, 1, 1)$, $\phi(y) = (1, t^2, 1)$ and $\phi(ab) = (tr, trt, rtr) = (tr, r, t^{-1})$ which implies $\phi(z) = (1, 1, t^{-2})$, we see that $\phi$ is injective on $\gen{x, y, z}$.
    We project $D_\infty \times D_\infty \times D_\infty$ onto the first two factors and then maps to $\Z/2 \oplus \Z/2$ by quotienting out the corresponding $\gen{t}$.
    This gives a map $q \circ \phi \colon P \epi \Z/2 \oplus \Z/2$ which has $\gen{x, y, z}$ in the kernel.
    Since $P / \gen{x, y, z} \cong \Z/2 \oplus \Z/2$, we see $\ker (q \circ phi) = \gen{x, y, z}$ and thus $g \notin \gen{x, y, z}$ implies $\phi(g) \neq 1$.
    So $\phi$ is injective.
\end{proof}

\section{The unit conjecture is not a ring theoretic statement}

We now make precise (in a way) the observation that the unit conjecture is a ``group ring theoretic'' statement and not simply a ring theoretic statement about a group ring, as the other $3$ Kaplansky conjectures are.

If the trivial units were a definable subset of the ring $K[G]$ (in the sense of model theory) then they would necessarily be invariant under all ring automorphisms, including conjugation by non-trivial units (if any exist).
This cannot be the case for non-exotic groups, at least.
Let's introduce the exotic groups in question.

\begin{definition}
    A group $V$ is called an \emph{Adian extension} if it is finitely generated and torsion-free and $V / Z(V)$ is an infinite group of finite exponent.
\end{definition}

This means there exists a positive integer $n$ such that $g^n = 1$ for all $g \in V / Z(V)$.

\begin{remark}
    The famous Burnside problem (1902) asks whether a finitely generated group of finite exponent must be finite.
    Novikov--Adian (1968) gave the first counterexample.
    Adian (1971) went one step further and constructed the first Adian extension.
    A group containing an Adian extension can certainly be considered ``exotic''.
\end{remark}

\begin{example}
    There are no solvable infinite ``Burnside groups'': we can prove by induction on the derived length that a finitely generated solvable group $G$ of finite exponent is finite.
    Indeed, the base case of derived length $0$ is the trivial group.
    For the inductive step, note that the abelianization of $G$ is finite (e.g.\ by the classification of finitely generated abelian groups, or argue directly) and the derived subgroup, being finite index in a finitely generated group, is itself finitely generated.
    Since solvability passes to quotients, this immediately implies that there are no solvable Adian extensions.
    In particular, the following proposition applies whenever $G$ is solvable.
\end{example}

\begin{proposition}
    \label{proposition:selfnormalizing_trivial_units}
    Let $G$ be torsion-free.
    Suppose that no subgroup of $G$ is an Adian extension.
    Let $T \leq (K[G])^\times$ denote the subgroup of trivial units.
    Then $T$ is self-normalizing i.e. $N_{(K[G])^\times}(T) = T$.
\end{proposition}

In other words, if $u$ is \emph{any} non-trivial unit then $T^u \neq T$.
(To show $T$ is not a definable subset of $K[G]$ we only need one such $u$.)

\begin{proof}[Proof of \Cref{proposition:selfnormalizing_trivial_units}]
    Suppose for the sake of contradiction that $u$ is a non-trivial unit of $K[G]$ with $T^u = T$.
    Let $S = \supp(u)$.
    Since $t u$ will also normalize $T$ for any $t \in T$, we can assume without loss of generality that $1 \in S$.
    Let $n = \abs{S}!$.

    Let $g \in G$ be a trivial unit.
    Let $h := u^{-1} g u \in T$.
    Considering the augmentation map, we see that $h \in G$.
    We change perspective and write the previous equation as $g^{-1} u h = u$.
    The map $G \to G \colon x \mapsto g^{-1} x h$ permutes the elements of $S$ and thus $x \mapsto g^{-n} x h^n$ fixes $S$ pointwise.
    As $1 \in S$, this means that $g^n = h^n$ and the aforementioned map is actually the inner automorphism $x \mapsto g^{-n} x g^n$, so $g^n \in C_G(V)$ where $V = \gen{S}$.
    This holds in particular for $g \in V$ so that the finitely generated group $V$ has the property that $V / Z(V)$ has exponent (dividing) $n$.
    By assumption $V$ cannot be an Adian extension, so $V / Z(V)$ is finite.
    By Schur's \Cref{lemma:schur}, this implies $V'$ is finite and hence trivial by torsion-freeness.
    Thus $V$ is a torsion-free abelian group supporting the non-trivial unit $u$, a contradiction.
\end{proof}

\section{Bi-orderable groups}

\begin{definition}
    A group $G$ is \emph{bi-orderable} if it admits a total order $<$ that is bi-invariant, that is, $g < h$ implies $kg < kh$ and $gk < hk$ for all $g, h, k \in G$.
\end{definition}

We will prove that if $G$ is bi-orderable, then $K[G]$ embeds into a skew field.
This is much stronger than satisfying the zero divisor conjecture.

\begin{lemma}
    $\cP \subset G$ is the positive cone of a bi-ordering if and only if
    \begin{enumerate}
        \item $\cP^2 \subseteq \cP$ (that is, it is a subsemigroup)
        \item $G = \cP \sqcup \{1\} \sqcup \cP^{-1}$.
        \item $\cP^g = \cP$ for all $g \in G$ (that is, it is a normal subset)
    \end{enumerate}
\end{lemma}

\begin{proof}
    Exercise.
\end{proof}

\begin{example}
    Torsion-free abelian groups are left-orderable (assuming the axiom of choice) and thus bi-orderable.
\end{example}

\begin{example}
    Free groups are bi-orderable.
\end{example}

We will not prove this but it follows from $F_n$ being residually torsion-free nilpotent.

\begin{lemma}
    A bi-orderable group has unique roots.
    That is, if $n \in \Z^+$ and $g, h \in G$ such that $g^n = h^n$, then $g = h$.
\end{lemma}

\begin{proof}
    If $g \neq h$ then without loss of generality $g < h$ and thus \[
        g^n = g^{n-1} g < g^{n-1} h < g^{n-2} h^2 < \dots < h^n.
    \]
\end{proof}

\begin{example}
    We can present the fundamental group $\Z \rtimes \Z$ of the Klein bottle as $\gp{a, b}{a^2 = b^2}$ which clearly fails to have unique roots.
\end{example}

\begin{proposition}
    \label{proposition:nilpotent_biorderable}
    Torsion-free nilpotent groups are bi-orderable.
\end{proposition}

\begin{example}
    \[
        \set{
            \begin{pmatrix}
                1 & x & z \\
                  & 1 & y \\
                  &   & 1
            \end{pmatrix}
        }{
            x, y, z \in \Z
        }
    \] is the (integral) Heisenberg group.
    It is the free $2$-generated class-$2$ nilpotent group.
\end{example}

\begin{lemma}
    \label{lemma:biorderable_extensions}
    Suppose $N \normal G$ such that $N$ and $G/N$ are bi-orderable, where $N$ admits a bi-ordering whose positive cone is a normal subset of $G$.
    Then $G$ is bi-orderable.
\end{lemma}

\begin{proof}
    Exercise.
\end{proof}

\Cref{lemma:biorderable_extensions} lets us prove inductively that torsion-free nilpotent groups are bi-orderable:
if $G$ is class-$c$ nilpotent then $G / Z(G)$ is class-$(c-1)$ nilpotent.
We just need to ensure $G / Z(G)$ is also torsion-free, that is, that for $n \in \Z^+$ and $g \in G$ we have \[
    ( [g^n, h] = 1 \quad \forall h \in G ) \implies ( [g, h] = 1 \quad \forall h \in G ).
\]
It suffices to show for all $n \in \Z^+$ and $g, h \in G$ that \[
    g^n = (h^{-1} g h)^n \implies g = h^{-1} g h.
\]
In other words, the whole question of bi-orderability for torsion-free nilpotent groups boils down to uniqueness of roots!

\begin{lemma}
    \label{lemma:quotient_by_tf_centre}
    Suppose $Z(G)$ is torsion-free.
    Then $Z(G / Z(G))$ is torsion-free.
\end{lemma}

\begin{proof}
    Suppose $\overline{g} \in Z(G / Z(G))$ satisfies $\overline{g}^n = 1$ for some $n \in \Z^+$.
    That is, for $g \in G$ with $\overline{g} = g Z(G)$ we have $g^n \in Z(G)$ and $[g, h] \in Z(G)$ for all $h \in G$.
    The identity $[xy, z] = [x, z]^y [y, z]$ implies the identity \[
        [x^n, y] = [x, y]^{x^{n-1}} [x, y]^{x^{n-2}} \dots [x, y]^x [x, y].
    \]
    In our case, for arbitrary $h \in G$ we have $[g, h] \in Z(G)$ and thus $[g^n, h] = [g, h]^n$.
    But $g^n \in Z(G)$ so $[g^n, h] = 1$ and $[g, h] \in Z(G)$ which is torsion-free.
    Thus $[g, h] = 1$.
    As $h$ was arbitrary, this means $g \in Z(G)$, that is, $\overline{g} = 1$.
\end{proof}

\begin{corollary}
    \label{corollary:nilpotent_quotient_torsion_free}
    Let $G$ be torsion-free nilpotent.
    Then $G / Z(G)$ is also torsion-free.
\end{corollary}

\begin{remark}
    We see that for nilpotent $G$, if $Z(G)$ is torsion-free then $G$ is torsion-free.
\end{remark}

\begin{proof}[Proof of \Cref{corollary:nilpotent_quotient_torsion_free}]
    The upper central series is \[
        1 = Z_0 \normal Z_1 \normal \dots \normal Z_c = G
    \] (where $G$ is class-$c$ nilpotent) defined by $Z_{i+1} / Z_i = Z(G / Z_i)$.
    Repeated application of \Cref{lemma:quotient_by_tf_centre} (to $G$, $G / Z_1$, $G / Z_2$, \dots) shows that all quotients $Z_{i+1} / Z_i$ are torsion-free.
    As extensions of torsion-free groups are torsion-free, the result follows.
\end{proof}

\begin{proof}[Proof of \Cref{proposition:nilpotent_biorderable}]
    Induct on nilpotency class, noting that a central subset is normal (so that \Cref{lemma:biorderable_extensions} applies) and torsion-free abelian groups are bi-orderable.
\end{proof}

Bi-orderability is the strongest property we've seen that implies the Kaplansky conjectures:

\begin{proposition}
    \label{proposition:biorderable_LI}
    Bi-orderable groups are locally indicable.
\end{proposition}

We will prove \Cref{proposition:biorderable_LI} mostly in exercises.
As bi-orderability passes to subgroups, it is equivalent to showing that a finitely generated bi-orderable group has infinite abelianization.

\begin{definition}
    Let $G$ be an ordered group.
    A subgroup $H < G$ is called \emph{convex} if for $a, b \in H$ and $g \in G$ we have $a < g < h$ implies $g \in H$.
\end{definition}

\begin{definition}
    Let $G$ be an ordered group.
    Then $G$ is called \emph{Archimedean} if for all $g, h > 1$ there exists $n \in \Z^+$ such that $g^n > h$.
\end{definition}

\begin{proposition}
    Let $G$ be an Archimedean bi-ordered group.
    Then $G$ is abelian.
\end{proposition}

\begin{remark}
    In fact, an Archimedean left-ordered group is automatically bi-ordered and moreover isomorphic to a subgroup of $\R$ (a theorem of Hölder).
\end{remark}

\begin{proof}
    Note that if $g, t > 1$ then there exists $n \in \N$ such that $t^n \leq g < t^{n+1}$.
    Suppose $G$ has a least positive element $t$.
    Then $t^n \leq g < t^{n+1}$ implies $1 \leq t^{-n} g < t$ so that $t^{-n} g = 1$, that is, any positive element is a power of $t$, so $G = \gen{t} \cong \Z$ is abelian.
    So we now assume there is no least positive element.

    Let $x, y \in G$.
    We will show $[x, y] = 1$.
    We can assume without loss of generality that $x > 1$ and $y > 1$ and since $[y, x] = [x, y]^{-1}$ we can also assume $[x, y] \geq 1$.
    Given any $t > 1$ we find integers $m, n$ such that $t^m \leq x < t^{m+1}$ and $t^n \leq y < t^{n+1}$ and thus $x^{-1} \leq t^{-m}$ and $y^{-1} \leq t^{-n}$ so that $[x, y] < t^{-m} t^{-n} t^{m+1} t^{n+1} = t^2$.
    We now just need to show that if $g > 1$ then there exists $t > 1$ such that $t^2 \leq g$ as this will force $[x, y] = 1$.

    Let $g > 1$ and take some $1 < s < g$.
    If $s^2 \leq g$ then we take $t = s$.
    Otherwise $s < g < s^2$ and $g < s^2$ implies $(s^{-1} g)^2 = s^{-1} \cdot g \cdot (s^{-1} g) < s^{-1} \cdot s^2 \cdot (s^{-1} g) = g$ whereas $s < g$ implies $1 < s^{-1} g$ so that $t = s^{-1} g$ works.
\end{proof}

\begin{exercise}
    In this exercise we prove \Cref{proposition:biorderable_LI}.
    Let $G$ be a bi-ordered group.
    \begin{enumerate}
        \item Let $g_0 > 1$.
            Show that \[
                N_{g_0} := \set{g \in G}{g^n < g_0 \quad \forall n \in \Z}
            \] is a subgroup of $G$.
        \item Suppose $G = \gen{S}$ and $g_0 = \max(S^{\pm 1})$.
            (Note that if $S$ is infinite, the maximum may not exist.)
            Show that $N_{g_0} \normal G$.
            (Hint: let $g \in N_{g_0}$ and write arbitrary $h \in G$ as a product of $|h|$ elements of $S^{\pm 1}$.
            Then show $g_0 < (h g_0 h^{-1})^{2|h| + 1}$ so that $g^{n(2|h| + 1)} < g_0$ implies $(h^{-1} g h)^n < g_0$.)
        \item Show that $N_{g_0}$ is convex.
        \item Show that there is a natural bi-ordering on the quotient of a bi-ordered group by a convex normal subgroup.
        \item Show that the bi-ordering on $G / N_{g_0}$ thus constructed is Archimedean.
        \item Conclude that a finitely generated bi-orderable group has infinite abelianization.
    \end{enumerate}
\end{exercise}

A stronger conjecture than the zero divisor conjecture is:

\begin{conjecture}
    Let $K$ be a field a $G$ be a torsion-free group.
    Then $K[G]$ embeds into a skew field (a.k.a.\ division ring).
\end{conjecture}

Suppose $K[G]$ satisfies the zero divisor conjecture.
We could attain a skew field by localization provided $K[G]$ satisfies the Ore condition: for all $a, b \in K[G]$ with $b \neq 0$ there exist $x, y \neq 0$ such that $xa = yb$.
However, we'll see later that this holds if and only if $G$ is amenable! % TODO add reference

As a motivating example, an alternative way to embed $K[\Z]$ into a field is to take the formal Laurent series.
Then supports can be infinite but are sufficiently well controlled that multiplication can be defined.
This generalizes to:

\begin{theorem}[Malcev, Neumann]
    \label{theorem:malcev_neumann}
    Let $G$ be a bi-ordered group.
    Let $D$ denote the formal sums $\sum_{g \in G} a_g \cdot g$, where $a_g \in K$, with well-ordered support.
    Then $D$ is a skew field containing $K[G]$.
\end{theorem}

\begin{definition}
    A set $X$ is \emph{well-ordered} if every non-empty subset of $X$ contains a least element.
\end{definition}

Every subset of a well-ordered set is well-ordered.

\begin{lemma}
    \label{lemma:wellordered_products}
    Let $G$ be a bi-ordered group, $g \in G$ and $A, B \subseteq G$ well-ordered subsets.
    Then
    \begin{enumerate}
        \item[(i)] $S = \set{(a, b) \in A \times B}{ab = g}$ is finite.
        \item[(ii)] $A \cup B$ and $AB$ are well-ordered.
    \end{enumerate}
\end{lemma}

\begin{proof}
    (i) If $S$ were infinite, we could construct an infinite ascending sequence in the projection $S_A = \pi_A(S) \subseteq A$ by defining $a_0 = \min(S_A)$ and $a_{i+1} = \min \set{a \in S_A}{a > a_i}$.
    Then $b_i := a_i^{-1} g$ defines an infinite descending sequence in $B$, a contradiction.

    (i) If $\emptyset \neq S \subseteq A \cup B$ then $\min(S) = \min(\min(S \cap A), \min(S \cap B))$.

    If $AB$ is not well-ordered, then we can construct an infinite descending sequence $a_1 b_1 > a_2 b_2 > \dots$ with $a_i \in A, b_i \in B$.
    Since $A$ is well-ordered we can construct an infinite non-decreasing subsequence $(a_{n_j})$ by setting $n_0$ such that $a_{n_0} = \min \{ a_i \}$ and then setting $n_{j+1}$ such that $a_{n_{j+1}} = \min \set{a_i}{i > n_j}$.
    Then $(b_{n_j})$ is strictly decreasing, a contradiction.
\end{proof}

\begin{proof}[Proof of \Cref{theorem:malcev_neumann}]
    We define addition and multiplication on $D$ in the same way as for $K[G]$.
    Multiplication is well-defined by \Cref{lemma:wellordered_products} part (i).
    Morever, the resulting formal sums have well-ordered support by part (ii).
    This makes $D$ into a ring - the ring axioms hold for the same reasons as in $K[G]$.

    We only need to check that non-zero elements are invertible.
    If $\beta \neq 0$ then letting $x = \min(\supp(\beta))$, we have $x^{-1} \supp(\beta) \subseteq \{1\} \cup \cP$, where $\cP$ is the positive cone of $G$, so we can write $\beta = (\beta)_x x (1 - \alpha)$ where $A = \supp(\alpha) \subseteq \cP$.
    As $(\beta)_x x$ is invertible, we just have to show that such $1 - \alpha$ is invertible.
    The obvious expression to try is $1 + \alpha + \alpha^2 + \dots$.
    We need to show that this is well-defined and has well-ordered support.

    \begin{proposition}
        \label{proposition:wellordered_subsemigroup}
        Let $G$ be a bi-ordered group with positive cone $\cP$ and suppose $A \subseteq \cP$ is well-ordered.
        Then $\tilde{A} = S(A) = \cup_{n=1}^\infty A^n$, the subsemigroup generated by $A$, is also well-ordered.
    \end{proposition}

    We finish the proof of \Cref{theorem:malcev_neumann} assuming \Cref{proposition:wellordered_subsemigroup}.
    The proposition has as a corollary that each $g$ only occurs in finitely many $A^n$, in other words, \[
        \limsup_{n \to \infty} A^n := \bigcap_{n=1}^\infty \bigcup_{j \geq n} A^j = \emptyset.
    \]

    Indeed, suppose the limsup is non-empty.
    Being a subset of $\tilde{A}$ it is well-ordered so we let $g$ be its least element.
    Then $g \in A^{n_j}$ for some $n_1 < n_2 < \dots$ and we write $g = a_j b_j$ where $a_j \in A$ and $b_j \in A^{n_j - 1} \subset \tilde{A}$.
    By \Cref{lemma:wellordered_products} (i) there are only finite many different pairs $(a_j, b_j)$ so some $b_j = a_j^{-1} g < g$ occurs infinitely many times, contradicting the minimality of $g$.
    Thus each $g \in G$ is in the support of only finitely many $\alpha^n$ and we can define $\gamma = 1 + \alpha + \alpha^2 + \dots \in D$, since $\tilde{A}$ is well-ordered.
    Clearly $((1 - \alpha)\gamma)_1 = 1$ whereas general \[
        ((1-\alpha)\gamma)_g = \sum_{ab = g} (1 - \alpha)_a (\gamma)_b
    \] can only involve finitely many $b \in \tilde{A}$ (\Cref{lemma:wellordered_products} (i)).
    Call them $b_1, \dots, b_k$ and choose $N$ such that $g, b_1, \dots, b_k \notin A^n$ for all $n > N$ so that we have
    \begin{align*}
        ((1 - \alpha)\gamma)_g
        &= \sum_{ab = g} (1 - \alpha)_a (\gamma)_b \\
        &= \sum_{ab = g} (1 - \alpha)_a (1 + \alpha + \dots + \alpha^N)_b \\
        &= ((1 - \alpha)(1 + \alpha + \dots + \alpha^N))_g \\
        &= (1)_g - (\alpha^{N+1})_g \\
        &= 0.
    \end{align*}
    Thus $(1 - \alpha) \gamma = 1$ and similarly $\gamma (1 - \alpha) = 1$.
\end{proof}

\begin{proof}[Proof of \Cref{proposition:wellordered_subsemigroup}]
    We wish to do proof by induction.
    We need to control how elements ``grow'' (in the ordering) when we take products of $a_i \in A$.
    We do this by breaking $\tilde{A}$ up into manageable pieces.

    The smallest convex subgroup containing $x \in G$ is \[
        c(x) := \set{g \in G}{x^{-i} \leq g \leq x^i \text{ for some } i \in \Z}.
    \]
    We note that $1 \leq x \leq y$ implies $c(x) \leq c(y)$.
    Define an equivalence relation $\sim$ on $A$ by $x \sim y$ if $c(x) = c(y)$.
    In other words, $x \sim y$ if there exist $m, n \in \Z^+$ such that $x \leq y^m$ and $y \leq x^n$.
    (This is called Archimedean equivalence.)

    As $A$ is well-ordered, we can define a transversal $W$ for $A / {\sim}$ by taking the smallest element of each equivalence class.
    Note that $W$ is also well-ordered.
    Equip $W \times \N^+$ with the lexicographic order, a well-ordering.

    Define $f \colon \tilde{A} \to W \times \N^+$ by sending $x$ to $(w, r)$ where $x \in [w]$ (i.e. $x \sim w$) and $r$ is minimal such that $x \leq w^r$.

    Then one checks that $f$ is order-preserving.
    It is convenient to extend $W \times \N^+$ by adding a smallest element $(1, 0)$.
    Let $X = W \times \N^+ \cup \{ (1, 0) \}$ and (by slight abuse of notation) also write $f \colon \tilde{A} \cup \{1\} \to X$ for the order-preserving extension.

    \begin{claim}
        If $x \in \tilde{A}$ we can write $x = x_0 a x_1$ for some $a \in A$ and $x_0, x_1 \in \tilde{A} \cup \{1\}$ such that $f(x) = f(a)$ and $f(x_0), f(x_1) < f(x)$.
    \end{claim}

    The proof of the claim is left as an exercise, with the hint that we write $x = a_1 a_2 \dots a_k$ for $a_i \in A$ and let $a = \max \{a_i\}$.

    Since $f$ is order-preserving and $X$ is well-ordered, $\tilde{A} \cup \{1\}$ will be well-ordered if and only if every $f^{-1}((w,r))$ is well-ordered.
    We prove this by transfinite induction on $X$.
    The base case is $f^{-1}((1, 0)) = \{1\}$, so trivial.
    The inductive step follows from the claim: if $S = f^{-1} (\set{(w', r') \in X}{(w', r') < (w, r)})$ then $f^{-1}((w, r)) \subseteq SAS$, which is well-ordered by \Cref{lemma:wellordered_products} (ii).
\end{proof}
